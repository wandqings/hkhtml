!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.MyLibrary=t():e.MyLibrary=t()}(this,function(){return function(e){var t={};function s(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t){!function(){let e=null;window.WebSocketClient=class{constructor(e="/videoOpenPlugin",t=18002){this.baseUrl=`${e}`,this.ports=t,this.currentPortIndex=0,this.socket=null,this.isConnected=!1,this.messageCallbacks={}}connect(){return new Promise((t,s)=>{if(this.isMacOrLinux())return void s({code:888,message:"请在Windows操作系统下使用"});if(!(this.isQuarkBrowser()||this.is360Browser()||this.isQQBrowser()||this.isEdgeBrowser()||this.isChromeBrowser()))return void s({code:999,message:"请在Chrome/Edge/360/QQ/Quark浏览器中打开"});const n=`ws://127.0.0.1:${this.ports}/websocket${this.baseUrl}`;this.socket=new WebSocket(n),this.socket.onopen=(()=>{this.isConnected=!0}),this.socket.onmessage=(n=>{let o=JSON.parse(n.data);const{uuid:i}=JSON.parse(n.data);this.messageCallbacks[i]&&this.isConnected&&(this.messageCallbacks[i](o),delete this.messageCallbacks[i]),0===o.code?t(o):(e=o,s(o)),window.dispatchEvent(new CustomEvent("websocket-message",{detail:o}))}),this.socket.onclose=(t=>{window.dispatchEvent(new CustomEvent("websocket-message",{detail:{cmd:"disconnect"}})),!e||6!==e.code||e.message}),this.socket.onerror=(e=>{s(e)})})}send(e,t){if(this.isConnected){const s=this.guid(16),n=Date.now(),o=JSON.stringify({uuid:s,timestamp:n,...e});t&&(this.messageCallbacks[s]=t),this.socket.send(o)}}disconnect(){this.socket&&this.socket.close()}guid(e=32,t=!0,s=null){const n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(s=s||n.length,e)for(let t=0;t<e;t++)o[t]=n[0|Math.random()*s];else{let e;o[8]=o[13]=o[18]=o[23]="-",o[14]="4";for(let t=0;t<36;t++)o[t]||(e=0|16*Math.random(),o[t]=n[19===t?3&e|8:e])}return t?(o.shift(),"u"+o.join("")):o.join("")}umStatistic(e){let{id:t,value:s}=e;"[object Object]"!==Object.prototype.toString.call(s)&&(s={userClick:s});const{aplus_queue:n}=window;n&&n.push({action:"aplus.record",arguments:[t,"CLK",s]})}install(e){window.dispatchEvent(new CustomEvent("websocket-message",{detail:{cmd:"downloadSdk"}}));let t=null;t=setTimeout(()=>{e&&e(),t=null},5e3)}wakeup(e){let t=document.createElement("iframe");t.style.display="none",t.src="HikIotVideoComponents://",document.body.appendChild(t);let s=null;s=setTimeout(()=>{document.body.removeChild(t),s=null},5e3);let n=null;n=setTimeout(()=>{e&&e(),n=null},5e3)}isMacOrLinux(){const e=navigator.userAgent.toLowerCase();return!(!e.includes("mac")&&!e.includes("linux"))}isQuarkBrowser(){return navigator.userAgent.toLowerCase().includes("quark")}isChromeBrowser(){return navigator.userAgent.toLowerCase().includes("chrome")}is360Browser(){const e=navigator.userAgent.toLowerCase();return e.includes("360se")||e.includes("360ee")||e.includes("qihoobrowser")}isQQBrowser(){return navigator.userAgent.toLowerCase().includes("mqqbrowser")}isEdgeBrowser(){return navigator.userAgent.toLowerCase().includes("edg")}getDevicePixelRatio(){return window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI}changeTeam(e,t){const s={cmd:"changeTeam",data:e||""};this.send(s,t)}initWndParam(e,t){const s={cmd:"initWndParam",data:{ezvizAddr:"https://open.ys7.com",authAddr:"https://auth.ys7.com",openAddr:"https://open.ys7.com",...e}};this.send(s,t)}showWnd(e,t){const s={cmd:"showWnd",data:e||""};this.send(s,t)}hideWnd(e,t){const s={cmd:"hideWnd",data:e||""};this.send(s,t)}setWndGeometry(e,t){const s=this.getDevicePixelRatio(),n=e.rect,o={cmd:"setWndGeometry",data:{rect:{top:Math.round(n.top*s),left:Math.round(n.left*s),width:Math.round(n.width*s),height:Math.round(n.height*s)}}||""};this.send(o,t)}estimateDevicePixelRatio(){const e=window.screen.width,t=window.screen.height;return(e/window.innerWidth+t/window.innerHeight)/2}setParentWnd(e,t){const s={cmd:"setParentWnd",data:e||""};this.send(s,t)}startPreview(e,t,s){const n={cmd:"startPreview",type:e,data:t||""};this.send(n,s)}batchPreview(e,t,s){const n={cmd:"batchPreview",type:e,data:t||""};this.send(n,s)}startPlayback(e,t,s){const n={cmd:"startPlayback",type:e,data:t||""};this.send(n,s)}batchPlayback(e,t,s,n){const o={cmd:"batchPlayback",type:e,startTime:t.startTime,endTime:t.endTime,searchType:t.searchType,data:s||""};this.send(o,n)}getWndCapture(e,t){const s={cmd:"getWndCapture",data:e||""};this.send(s,t)}setCuttingArea(e,t){const s=this.getDevicePixelRatio(),n={cmd:"setCuttingArea",data:{verScrollRect:{width:Math.round(e.verScrollRect.width*s)},horScrollRect:{height:Math.round(e.horScrollRect.height*s)}}||""};this.send(n,t)}updateParentWnd(e,t){const s={cmd:"updateParentWnd",data:e||""};this.send(s,t)}setPlayWindowType(e,t){const s={cmd:"setPlayWindowType",data:e||""};this.send(s,t)}hideArea(e,t){const s=this.getDevicePixelRatio(),n=e.areaList[0],o={cmd:"hideArea",data:{areaList:[{top:Math.round(n.top*s),left:Math.round(n.left*s),width:Math.round(n.width*s),height:Math.round(n.height*s),radius:n.radius}]}||""};this.send(o,t)}showArea(e,t){const s=e.areaList[0],n=this.getDevicePixelRatio(),o={cmd:"showArea",data:{areaList:[{top:Math.round(s.top*n),left:Math.round(s.left*n),width:Math.round(s.width*n),height:Math.round(s.height*n),radius:s.radius}]}||""};this.send(o,t)}setMouseStyle(e,t){const s={cmd:"setMouseStyle",data:e||""};this.send(s,t)}openFile(e,t){const s={cmd:"openFile",data:e||""};this.send(s,t)}ptzControl(e,t,s){const n={cmd:"ptzControl",type:e,data:t||""};this.send(n,s)}presetSnapshotUpload(e,t){const s={cmd:"presetSnapshotUpload",data:e||""};this.send(s,t)}setAutoTrackState(e,t){const s={cmd:"setAutoTrackState",data:e||""};this.send(s,t)}initResource(e,t){const s={cmd:"initResource",data:e||""};this.send(s,t)}setSecretConfigInfo(e,t){const s={cmd:"setSecretConfigInfo",data:e||""};this.send(s,t)}}}()}])});